mapscripts RocketHideout_B1_MapScripts {
    MAP_SCRIPT_ON_TRANSITION: EventScript_OnLoad_RocketHideout_B1
}


script EventScript_OnLoad_RocketHideout_B1{
    if(flag(FLAG_ROCKETB1_BASEMENT_GAUNTLET_BEAT)){
        settrainerflag(TRAINER_ROCKETM_ROCKETHIDEOUTB1_ONE)
        settrainerflag(TRAINER_ROCKETM_ROCKETHIDEOUTB1_TWO)
        settrainerflag(TRAINER_ROCKETM_ROCKETHIDEOUTB1_THREE)
    }else{
        //cleartrainerflag()
        cleartrainerflag(TRAINER_ROCKETM_ROCKETHIDEOUTB1_FOUR)
        cleartrainerflag(TRAINER_ROCKETM_ROCKETHIDEOUTB1_FIVE)
        cleartrainerflag(TRAINER_ROCKETM_ROCKETHIDEOUTB1_SIX)
    }
}

script EventScript_RocketHideout_B1_TriggerA{
    lock
    applymovement(OBJ_EVENT_ID_PLAYER, MovementRocketHideout_B1_A)
    waitmovement(0)
    call(EventScript_RocketHideout_B1_MovePlayer)
    release
}

movement MovementRocketHideout_B1_A {
    walk_right
    walk_down
    face_right
}

script EventScript_RocketHideout_B1_TriggerB{
    lock
    applymovement(OBJ_EVENT_ID_PLAYER, MovementRocketHideout_B1_B)
    waitmovement(0)
    call(EventScript_RocketHideout_B1_MovePlayer)
    release
}

movement MovementRocketHideout_B1_B {
    walk_right
}

script EventScript_RocketHideout_B1_TriggerC{
    lock
    applymovement(OBJ_EVENT_ID_PLAYER, MovementRocketHideout_B1_C)
    waitmovement(0)
    call(EventScript_RocketHideout_B1_MovePlayer)
    release
}

movement MovementRocketHideout_B1_C {
    walk_right
    walk_up
    face_right
}

script EventScript_RocketHideout_B1_MovePlayer{
    lock
    hideobjectat(13,MAP_ROCKET_HIDEOUT_B1)
    playbgm( MUS_ENCOUNTER_AQUA,TRUE)
    applymovement(OBJ_EVENT_ID_PLAYER, MovementRocketHideout_B1_PlayerToGiovanni)
    waitmovement(0)
    call(EventScript_RocketHideout_B1_GiovanniSequence_One)
    release
}

movement MovementRocketHideout_B1_PlayerToGiovanni {
    emote_exclamation_mark
    walk_right * 6
    walk_up * 1
    walk_right * 1
}

script EventScript_RocketHideout_B1_GiovanniSequence_One{
    lock 
    faceplayer
    msgbox(Giovanni_RocketHideout_B1_Intro)
    waitmessage
    applymovement(10,Movement_RocketHideoutB1_Scientist_One)
    waitmovement(0)
    msgbox(format("YOU HAVE INTERFERED WITH OUR RESEARCH ENOUGH!"))
    waitmessage
    //first battle
    applymovement(OBJ_EVENT_ID_PLAYER, LookRightPlayer_RocketHideoutB1)
    waitmovement(0)
    trainerbattle_single(TRAINER_GIOVANNI_ROCKETHIDEOUTB1_ONE, Giovanni_BattleOne_RocketHideout_B1_Intro, Giovanni_BattleOne_RocketHideout_B1_Outro,EventScript_RocketHideout_B1_GiovanniSequence_Two)
    release
}

script EventScript_RocketHideout_B1_GiovanniSequence_Two{
    //move Scientist back
    applymovement(OBJ_EVENT_ID_PLAYER, LookRightPlayer_RocketHideoutB1)
    waitmovement(0)
    applymovement(10, Movement_RocketHideoutB1_Scientist_One_Return)
    waitmovement(0)
    applymovement(12, Movement_RocketHideoutB1_Scientist_Two)
    waitmovement(0)
    //move up new scientist

    trainerbattle_single(TRAINER_GIOVANNI_ROCKETHIDEOUTB1_TWO, Giovanni_BattleTwo_RocketHideout_B1_Intro, Giovanni_BattleTwo_RocketHideout_B1_Outro,EventScript_RocketHideout_B1_GiovanniSequence_Three)
}

movement LookRightPlayer_RocketHideoutB1 {
    face_right
}

script EventScript_RocketHideout_B1_GiovanniSequence_Three{
    applymovement(OBJ_EVENT_ID_PLAYER, LookRightPlayer_RocketHideoutB1)
    waitmovement(0)
    setflag(FLAG_DYNAMAX_ALLOWED)
    //move scientist back
    applymovement(12, Movement_RocketHideoutB1_Scientist_Two_Return)
    waitmovement(0)
    msgbox(format("GIOVANNI: With ease... you best my two most clever scientists. You best my gym leaders. And now you attempt to best me."))
    //move up giovanni - bring out Mewtwo
    waitmessage
    msgbox(format("GIOVANNI: MEWTWO. COME FORTH!"))
    waitmessage
    showobjectat(13,MAP_ROCKET_HIDEOUT_B1)
    msgbox(format("MEWTWO: YES. MASTER."))
    waitmessage
    msgbox(format("Finally we shall see. My full power, using the tools we have created, against your power"))
    waitmessage
    trainerbattle_single(TRAINER_GIOVANNI_ROCKETHIDEOUTB1_THREE, Giovanni_BattleThree_RocketHideout_B1_Intro, Giovanni_BattleThree_RocketHideout_B1_Outro,EventScript_RocketHideout_B1_GiovanniSequence_PostBattle)
}

script EventScript_RocketHideout_B1_GiovanniSequence_PostBattle{
    lock
    applymovement(OBJ_EVENT_ID_PLAYER, LookRightPlayer_RocketHideoutB1)
    waitmovement(0)
    clearflag(FLAG_DYNAMAX_ALLOWED)
    msgbox(format("GIOVANNI: So it se-"))
    //sreenshake
    waitmessage
    msgbox(format("MEWTWO: YOU HUMANS HAVE USED POKEMON FOR THE WRONG PURPOSE. THIS CONFLICT, IT IS YOURS NOT OURS, THIS FINAL BATTLE HAS SHOWN ME... ALL HUMANS ARE HORRIBLE. I CANNOT ALLOW THIS TO CONTINUE!"))
    //flash or something
    waitmessage
    setflag(FLAG_ROCKET_EVENT_COMPLETED)
    clearflag(FLAG_ROCKET_EVENT_ACTIVE)
    setflag(FLAG_MEWTWO_ISLAND_ACTIVE)
    setvar(VAR_ROCKET_ARC_STATE,9)
    release
}

text Giovanni_RocketHideout_B1_Intro{
    format("GIOVANNI: You have annoyed me {PLAYER}. We were so close to dominating this Hoenn region... but you had to interfere, hadn't you? I'm done playing nice and fair with you. You better prepare to face some of our strongest cloned Pokemons and our latest tech. My scientists, take him on!")
}

text Giovanni_RocketHideout_B1_Second{
    format("")
}

text Giovanni_RocketHideout_B1_Third{
    format("")
}

text Giovanni_BattleOne_RocketHideout_B1_Intro{
    format("I'M GOING TO END YOU!")
}
text Giovanni_BattleOne_RocketHideout_B1_Outro{
    format("No... no! NO!")
}
text Giovanni_BattleTwo_RocketHideout_B1_Intro{
    format("Bwahahaha, no rest for you!")
}
text Giovanni_BattleTwo_RocketHideout_B1_Outro{
    format("In-incredible...")
}

text Giovanni_BattleThree_RocketHideout_B1_Intro{
    format("This ends here!")
}
text Giovanni_BattleThree_RocketHideout_B1_Outro{
    format("...")
}

movement Movement_RocketHideoutB1_Scientist_One{
    walk_up * 3
    walk_left
}
movement Movement_RocketHideoutB1_Scientist_One_Return {
    walk_fast_right
    walk_fast_down * 3
    face_up
}

movement Movement_RocketHideoutB1_Scientist_Two{
    walk_left * 2
    walk_down
    walk_left * 1
}
movement Movement_RocketHideoutB1_Scientist_Two_Return {
    walk_fast_up * 3
    face_down
}

script EventScriptRocketOne_RocketHideoutB1{
    trainerbattle_single(TRAINER_ROCKETM_ROCKETHIDEOUTB1_ONE, RocketOne_RocketHideoutB1_BattleIntro, RocketOne_RocketHideoutB1_BattleOutro,EventScript_RocketOne_PostBattle_RocketHideoutB1)
    call(EventScript_RocketOne_PostBattle_RocketHideoutB1)
}

script EventScript_RocketOne_PostBattle_RocketHideoutB1{
    lock
    faceplayer
    msgbox(RocketOne_RocketHideoutB1_BattleOutro)
    waitmessage
    release
}

text RocketOne_RocketHideoutB1_BattleIntro{
    format("Huh, you are what they are talking about?")
}
text RocketOne_RocketHideoutB1_BattleOutro{
    format("Looks decieve...")
}

script EventScriptRocketTwo_RocketHideoutB1{
    trainerbattle_single(TRAINER_ROCKETM_ROCKETHIDEOUTB1_TWO, RocketTwo_RocketHideoutB1_BattleIntro, RocketTwo_RocketHideoutB1_BattleOutro,EventScript_RocketTwo_PostBattle_RocketHideoutB1)
    call(EventScript_RocketTwo_PostBattle_RocketHideoutB1)
}

script EventScript_RocketTwo_PostBattle_RocketHideoutB1{
    lock
    faceplayer
    msgbox(RocketTwo_RocketHideoutB1_BattleOutro)
    waitmessage
    release
}

text RocketTwo_RocketHideoutB1_BattleIntro{
    format("Huh, you are what they are talking about?")
}
text RocketTwo_RocketHideoutB1_BattleOutro{
    format("Looks decieve...")
}

script EventScriptRocketThree_RocketHideoutB1{
    trainerbattle_single(TRAINER_ROCKETM_ROCKETHIDEOUTB1_THREE, RocketThree_RocketHideoutB1_BattleIntro, RocketThree_RocketHideoutB1_BattleOutro,EventScript_RocketThree_PostBattle_RocketHideoutB1)
    call(EventScript_RocketThree_PostBattle_RocketHideoutB1)
}

script EventScript_RocketThree_PostBattle_RocketHideoutB1{
    lock
    faceplayer
    msgbox(RocketThree_RocketHideoutB1_BattleOutro)
    waitmessage
    release
}

text RocketThree_RocketHideoutB1_BattleIntro{
    format("Huh, you are what they are talking about?")
}
text RocketThree_RocketHideoutB1_BattleOutro{
    format("Looks decieve...")
}

script EventScriptRocketFour_RocketHideoutB1{
    trainerbattle_single(TRAINER_ROCKETM_ROCKETHIDEOUTB1_FOUR, RocketFour_RocketHideoutB1_BattleIntro, RocketFour_RocketHideoutB1_BattleOutro,EventScript_RocketFour_PostBattle_RocketHideoutB1)
    call(EventScript_RocketFour_PostBattle_RocketHideoutB1)
}

script EventScript_RocketFour_PostBattle_RocketHideoutB1{
    lock
    faceplayer
    msgbox(RocketFour_RocketHideoutB1_BattleOutro)
    waitmessage
    release
}

text RocketFour_RocketHideoutB1_BattleIntro{
    format("Huh, you are what they are talking about?")
}
text RocketFour_RocketHideoutB1_BattleOutro{
    format("Looks decieve...")
}

script EventScriptRocketFive_RocketHideoutB1{
    trainerbattle_single(TRAINER_ROCKETM_ROCKETHIDEOUTB1_FIVE, RocketFive_RocketHideoutB1_BattleIntro, RocketFive_RocketHideoutB1_BattleOutro,EventScript_RocketFive_PostBattle_RocketHideoutB1)
    call(EventScript_RocketFive_PostBattle_RocketHideoutB1)
}

script EventScript_RocketFive_PostBattle_RocketHideoutB1{
    lock
    faceplayer
    msgbox(RocketFive_RocketHideoutB1_BattleOutro)
    waitmessage
    release
}

text RocketFive_RocketHideoutB1_BattleIntro{
    format("Huh, you are what they are talking about?")
}
text RocketFive_RocketHideoutB1_BattleOutro{
    format("Looks decieve...")
}

script EventScriptRocketSix_RocketHideoutB1{
    trainerbattle_single(TRAINER_ROCKETM_ROCKETHIDEOUTB1_SIX, RocketSix_RocketHideoutB1_BattleIntro, RocketSix_RocketHideoutB1_BattleOutro,EventScript_RocketSix_PostBattle_RocketHideoutB1)
    call(EventScript_RocketSix_PostBattle_RocketHideoutB1)
}

script EventScript_RocketSix_PostBattle_RocketHideoutB1{
    lock
    faceplayer
    msgbox(RocketSix_RocketHideoutB1_BattleOutro)
    waitmessage
    setflag(FLAG_ROCKETB1_BASEMENT_GAUNTLET_BEAT)
    release
}

text RocketSix_RocketHideoutB1_BattleIntro{
    format("Huh, you are what they are talking about?")
}
text RocketSix_RocketHideoutB1_BattleOutro{
    format("Looks decieve...")
}